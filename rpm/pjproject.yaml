Name: pjproject
Summary: A multimedia communication library implementing standard based protocols such as SIP, SDP, RTP, STUN, TURN, and ICE
Version: 2.11.1
Group: Development/Libraries
URL: https://github.com/savoirfairelinux/pjproject
SCM: https://github.com/savoirfairelinux/pjproject
License: GPLv2
Sources:
    - '%{name}-%{version}.tar.gz'
Patches:
    # from jami-daemon/config/src/pjproject
    - 0009-add-config-site.patch
#Requires:
#    - ^^^
PkgBR:
    - opus-devel
    # should be enabled, but OBS get stuck in "downloading dod"
    # libsrtp-devel
PkgConfigBR:
    - speex
    - speexdsp
    - openssl
    - libresample
    - samplerate
SetupOptions: '-q -n %{name}-%{version}/upstream'
ConfigOptions:
    - '--enable-shared'
    - '--disable-video'
    - '--enable-ssl'
    - '--enable-opus'
    - '--enable-libsamplerate'
    - '--enable-resample'
    # disable because of conflicts with the system versions
    # '--enable-speex'
    - '--with-external-speex'
    # '--with-external-srtp'
    # '--with-external-webrtc'
    - '--disable-libwebrtc'
    - 'CFLAGS="$CFLAGS -DNDEBUG=1"'
    - 'CFLAGS="$CFLAGS -DPJ_HAS_IPV6=1"'
Builder: none
AutoSubPackages:
    - devel
